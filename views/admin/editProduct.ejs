<%- include('../layouts/adminHeader.ejs') %>
 <section style=" padding-top: 5px;" >
  <div class="col-md-10 col-lg-6 col-xl-5 order-2 order-lg-1" > 
   
    <div class="product-form"  >
    <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Edit Product</p>
    <div class="container" style="display:flex; align-items: flex-end;">
      
      <!-- container -->
    </div> 
      <div>
                <!-- enctype="multipart/form-data" -->
                  <form class="mx-1 mx-md-4" action="/admin/editProduct/<%=products[0]._id %>" method="post" enctype="multipart/form-data" >
                    <input type="hidden" name="id" value="<%=products[0]._id%>">
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-user fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                        <label class="form-label" for="form3Example1c">Product Name:</label>
                        <input type="text"  name="title"  id="form3Example1c" class="form-control" value="<%= products[0].title %>" />
                        <% if( errors && errors.title ) { %>
                          <span class="text-danger"><%= errors.title.msg %></span>
                          <% } %>
                        
                      </div>
                    </div>
  
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-envelope fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                        <label class="form-label" for="form3Example3c">Description</label>
                        <input type="text"  name="description" id="form3Example3c" class="form-control" value="<%= products[0].description %>" />         
                        <% if( errors && errors.description ) { %>
                          <span class="text-danger"><%= errors.description.msg %></span>
                          <% } %>
                      </div>
                    </div>
  
                    <div class="d-flex flex-row align-items-center mb-4">
                      <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                      <div class="form-outline flex-fill mb-0">
                        <label class="form-label" for="form3Example4c">Select Category</label>
                        <% 
                        if(typeof categories !=='undefined'){ %>
                        <select name="categoryId" id="" class="form-control" style="color:blue">
                          <option    value="<%= products[0].category_id._id %>"><%=products[0].category_id.category%>
                            </option>
                            <% for(let category of categories) { %>
                            <option   name="category_id" value="<%= category._id %>"><%=category.category%>
                            </option>
                          <% } %>
                          <!-- <option selected  value="<%=products[0].category_id._id %>"><%=products[0].category_id.category %></option> -->
                        </select>
                        <%}%> 
                        <!-- <input type="text" name="category" id="form3Example4c" class="form-control" />  -->
                     </div>
                    </div>

                    <div class="d-flex flex-row align-items-center mb-4">
                        <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                        <div class="form-outline flex-fill mb-0">
                          <label class="form-label" for="form3Example4c1">Unit Price</label>
                          <input type="number" name="unit_price" id="form3Example4c1" class="form-control" value="<%= products[0].unit_price %>" />            
                          <% if( errors && errors.unit_price ) { %>
                            <span class="text-danger"><%= errors.unit_price.msg %></span>
                            <% } %>
                        </div>
                      </div>
                      <div class="d-flex flex-row align-items-center mb-4">
                        <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                        <div class="form-outline flex-fill mb-0">
                          <label class="form-label" for="form3Example4c1">Weight</label>
                          <input type="text" name="weight" id="form3Example4c1" class="form-control" value="<%= products[0].Weight %>" />            
                          <% if( errors && errors.weight ) { %>
                            <span class="text-danger"><%= errors.weight.msg %></span>
                            <% } %>
                        </div>
                      </div>
                      <div class="d-flex flex-row align-items-center mb-4">
                        <i class="fas fa-lock fa-lg me-3 fa-fw"></i>
                        <div class="form-outline flex-fill mb-0">
                          <label class="form-label" for="form3Example4c1">Quantity</label>
                          <input type="number" name="quantity" id="form3Example4c1" class="form-control" value="<%= products[0].quantity %>"/>            
                          <% if( errors && errors.quantity ) { %>
                            <span class="text-danger"><%= errors.quantity.msg %></span>
                            <% } %>
                        </div>
                      </div>
                      <td>
                       
                      <hr>
                                           <br>
                    </td>
                      <label class="form-label" for="form3Example4c2"><h6>select product Images </h6></label>
                      <input type="file" id="imgInp" multiple accept="image/*" name="image" ><br><br>
                      <!-- <label><h6><input type="checkbox" name="chkimage">&nbsp;edit product images</h6></label> -->
                      <!-- <div class="d-flex justify-content-center mx-4 mb-3 mb-lg-4"> -->
                      <button type="submit" class="btn btn-primary btn-lg">Update Product</button>
                    <!-- </div> -->
                    </form>
                    </div>
                    <div >
                      <table>
                      <tr>
                       <!-- display images -->
                          <td> <h4 style="padding-bottom:0;margin-bottom:10px">&nbsp;&nbsp;&nbsp;Images</h4>
                            <hr style="margin-bottom: 5px;padding-bottom: 5px;">
                          <div class="row"  >
                            <div class="col-md-5"   >
                          
                              <% for (let i = 0; i < products[0].images.length; i++) { %>
                            <div class="container" style="display: flex;">
                               <img  id="image2"  style="margin-right: 8px; margin-top: 0;padding-top: 0;" class="rounded"  style="width: 80px; height: 80px;"  src="/images/product/<%=products[0].images[i]%>" height="100" width="150" alt""">
                                <a  href="/product/deleteImage/<%=products[0]._id%>?imageId=<%=products[0].images[i]%>" >delete</a</td>
                               <% } %>
                            </div>

                            </div>
                          </div>
                        </div>
                        </td>
                        
                      </tr>
                    </table>
                   
                  </div>
                  <br><br> <br><br>
                  
                  </form>
                  </div>
                  </div>
                 

                 
                  <!-- <script>
                    imgInp.onchange = evt => {
                   const [file] = imgInp.files
                   if (file) {
                     image1.src = URL.createObjectURL(imgInp.files[0])
                     image2.src = URL.createObjectURL(imgInp.files[1])
                     image3.src = URL.createObjectURL(imgInp.files[2])
                     image4.src = URL.createObjectURL(imgInp.files[3])
                   }
                 }
                  
                   </script> -->
                  </section>
                 
                 